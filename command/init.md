---
description: Initialize project with enhanced OpenCode setup, spec-kit integration, constitutional compliance, and comprehensive Git hooks
agent: build
subtask: true
---

Initialize OpenCode for this project with enhanced setup including spec-kit integration, constitutional compliance, and comprehensive Git hooks:

1. **Enhanced Initialization Flow**
   - Analyze project structure and technologies
   - Verify /CONSTITUTION.md exists and is properly formatted
   - Create constitutional_checks.yml for constitutional compliance validation
   - Set up audit trail system for constitutional compliance tracking
   - Integrate constitutional validation into all initialization phases
   - Check for existing Git setup and constitutional compliance

2. **Spec-Kit Integration Enhancement**
   - Fetch spec-kit template from https://github.com/github/spec-kit
   - Get AGENTS.md from spec-kit for Spec-Driven Development methodology
   - Merge spec-kit logic with OpenCode's agent-based approach
   - Add constitutional compliance validation to spec-kit installation
   - Include constitutional standards validation in spec-kit templates
   - Integrate constitutional audit into spec-kit workflows
   - Create enhanced .specify/ directory structure with constitutional artifacts
   - Create unified project configuration with constitutional requirements

3. **Copilot-CLI Configuration**
   - Install and configure Copilot-CLI for the project
   - Add constitutional standards validation in Copilot-CLI setup
   - Include constitutional compliance checking in Copilot-CLI workflows
   - Add constitutional audit trail integration to Copilot-CLI operations
   - Update Copilot-CLI authentication with constitutional requirements
   - Configure Copilot-CLI to validate constitutional compliance

4. **Enhanced Agent Setup**
   - Create project-specific OpenCode configuration with constitutional compliance
   - Set up appropriate LSP servers with constitutional validation
   - Configure relevant MCP servers with constitutional requirements
   - Initialize project-specific commands with constitutional compliance
   - Add constitutional compliance validation for all agents
   - Include constitutional standards integration in agent configurations
   - Add constitutional audit requirements to agent operations
   - Update agent synchronization with constitutional checks
   - Create spec-kit directory structure (.specify/) with constitutional artifacts

5. **Documentation Generation**
   - Create comprehensive AGENTS.md with merged spec-kit + OpenCode functionality
   - Generate project-specific rules and constitutional guidelines
   - Set up constitutional compliance documentation and workflows
   - Initialize spec-kit templates with constitutional validation
   - Create constitutional audit documentation and procedures
   - Set up development workflow documentation with constitutional requirements

6. **Husky Git Hooks Setup**
   - Initialize Husky for Git hook management with constitutional compliance
   - Set up pre-commit hooks for quality gates and constitutional validation
   - Configure commit-msg hooks for commit standards and constitutional checks
   - Add pre-push hooks for validation and constitutional compliance
   - Set up post-commit hooks for notifications and constitutional audit
   - Configure post-merge hooks for integration and constitutional validation

7. **Workflow Integration**
   - Set up Spec-Driven Development commands (/speckit.*) with constitutional compliance
   - Integrate with OpenCode agent system and constitutional requirements
   - Create unified development workflow with constitutional validation
   - Establish constitutional compliance verification checkpoints

8. **Verification Process**
   - Add constitutional compliance verification for all components
   - Include Spec-Kit constitutional alignment check
   - Add Copilot-CLI constitutional validation
   - Update final verification with comprehensive constitutional audit
   - Verify all constitutional compliance requirements are met

## Constitutional Compliance Integration

### Constitutional Validation Phases
- **/CONSTITUTION.md Verification**: Validate constitutional document exists and is properly formatted
- **Constitutional Checks Setup**: Create constitutional_checks.yml with compliance rules
- **Audit Trail Creation**: Set up constitutional compliance tracking system
- **Agent Constitutional Validation**: Verify all agents meet constitutional requirements
- **Spec-Kit Constitutional Alignment**: Ensure spec-kit integration follows constitutional standards
- **Copilot-CLI Constitutional Compliance**: Validate Copilot-CLI setup meets constitutional requirements

### Constitutional Compliance Hooks
- **Pre-Initialization Check**: Verify constitutional document before any setup
- **Agent Compliance Validation**: Check all agents against constitutional standards
- **Spec-Kit Constitutional Review**: Validate spec-kit templates include constitutional requirements
- **Documentation Constitutional Audit**: Ensure all documentation meets constitutional standards
- **Final Constitutional Verification**: Comprehensive constitutional compliance check

## Git Hook Phases

### Pre-commit Hooks
- **Code Quality**: Run linting, formatting, and type checking
- **Testing**: Execute unit tests and integration tests
- **Security**: Run security scans and vulnerability checks
- **Constitutional Validation**: Verify changes comply with constitutional standards
- **Spec-Kit Validation**: Validate SDD artifacts when present
- **Documentation**: Check for updated documentation and constitutional compliance

### Commit-msg Hooks
- **Conventional Commits**: Enforce commit message standards
- **Constitutional Compliance**: Validate commit messages meet constitutional requirements
- **Issue Tracking**: Validate issue references in commits
- **SDD Integration**: Check for spec-kit references
- **Quality Gates**: Ensure quality checks passed
- **Constitutional Audit**: Log constitutional compliance status

### Pre-push Hooks
- **Full Test Suite**: Run comprehensive test suite
- **Integration Tests**: Validate cross-component functionality
- **Performance Checks**: Run performance benchmarks
- **Security Audit**: Complete security validation
- **Constitutional Compliance Check**: Verify push meets constitutional standards
- **Documentation Sync**: Ensure docs are up-to-date and constitutionally compliant

### Post-commit Hooks
- **Notifications**: Send team notifications
- **Constitutional Audit Trail**: Log constitutional compliance events
- **Tag Management**: Auto-tag releases based on commit messages
- **Metric Collection**: Collect development metrics including constitutional compliance
- **Backup**: Create automatic backups with constitutional validation
- **Constitutional Reporting**: Generate constitutional compliance reports

### Post-merge Hooks
- **Integration Testing**: Test merged functionality
- **Constitutional Validation**: Verify merge maintains constitutional compliance
- **Documentation Update**: Auto-update relevant docs with constitutional requirements
- **Deployment Prep**: Prepare artifacts for deployment with constitutional checks
- **Team Communication**: Notify team of changes and constitutional status
- **Constitutional Audit**: Perform post-merge constitutional compliance audit

## Constitutional Compliance Workflow

### Phase 1: Constitutional Setup
1. Verify /CONSTITUTION.md exists and is properly formatted
2. Create constitutional_checks.yml with project-specific constitutional rules
3. Set up constitutional audit trail system
4. Initialize constitutional compliance tracking

### Phase 2: Spec-Kit Constitutional Integration
1. Fetch spec-kit template with constitutional compliance validation
2. Validate spec-kit templates against constitutional standards
3. Create constitutional artifacts in .specify/ directory
4. Integrate constitutional audit into spec-kit workflows

### Phase 3: Agent Constitutional Compliance
1. Configure all agents with constitutional validation
2. Add constitutional compliance checks to agent operations
3. Set up constitutional audit requirements for agents
4. Verify agent synchronization maintains constitutional compliance

### Phase 4: Copilot-CLI Constitutional Setup
1. Configure Copilot-CLI with constitutional standards validation
2. Add constitutional compliance checking to Copilot-CLI workflows
3. Integrate constitutional audit trail into Copilot-CLI operations
4. Update authentication to include constitutional requirements

### Phase 5: Verification and Audit
1. Perform comprehensive constitutional compliance verification
2. Validate Spec-Kit constitutional alignment
3. Verify Copilot-CLI constitutional compliance
4. Generate final constitutional audit report
5. Confirm all constitutional requirements are met

Process:
1. Analyze current project structure and constitutional compliance requirements
2. Verify /CONSTITUTION.md and create constitutional_checks.yml
3. Fetch spec-kit template with constitutional compliance validation
4. Merge spec-kit SDD methodology with OpenCode agent system including constitutional requirements
5. Create enhanced .specify/ directory structure with constitutional artifacts
6. Generate unified AGENTS.md with constitutional compliance integration
7. Create project-specific configurations with constitutional validation
8. Initialize Husky with constitutional compliance hooks
9. Configure constitutional audit trail and compliance tracking
10. Verify all constitutional compliance requirements are met
11. Perform final constitutional audit and generate compliance report

Use todowrite to track initialization steps, constitutional compliance setup, hook configuration, and any issues encountered.